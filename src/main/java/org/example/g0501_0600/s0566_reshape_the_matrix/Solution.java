package org.example.g0501_0600.s0566_reshape_the_matrix;

// #Easy #Array #Matrix #Simulation #Math

/**
 * 566. Reshape the Matrix
 *
 * Вам дана матрица mat размером m x n и два целых числа r и c,
 * представляющие количество строк и столбцов новой матрицы.
 * Необходимо преобразовать исходную матрицу в новую матрицу размером r x c,
 * сохраняя исходный порядок элементов.
 *
 * Если преобразование с заданными параметрами невозможно и не сохраняет
 * все элементы, верните исходную матрицу.
 *
 * Правила преобразования:
 * Новые размеры r x c должны точно содержать все элементы исходной матрицы
 * То есть: m * n == r * c
 * Если преобразование невозможно, вернуть исходную матрицу
 * Порядок элементов должен сохраняться (обход row-major order)
 * (примеры внизу)
 *
 * Решение с использованием линейного индекса - 2-е решение - 1 ms
 *
 * todo изучить линейный индекс
 *
 * Преимущества:
 * Время выполнения: O(m*n) - один проход по всем элементам
 * Память: O(r*c) - только для новой матрицы
 * Простая и эффективная математика индексов
 *
 */
class Solution {
    public int[][] matrixReshape(int[][] mat, int r, int c) {
        int originalRows = mat.length;
        int originalCols = mat[0].length;

        // Проверяем возможность преобразования
        if (originalRows * originalCols != r * c) {
            return mat; // Невозможно преобразовать - возвращаем исходную матрицу
        }

        // Создаем новую матрицу
        int[][] reshapedMatrix = new int[r][c];

        // Преобразуем индексы: [i][j] → линейный индекс → [new_i][new_j]
        for (int i = 0; i < originalRows; i++) {
            for (int j = 0; j < originalCols; j++) {
                int linearIndex = i * originalCols + j; // Линейный индекс в исходной матрице
                int newRow = linearIndex / c;           // Новая строка
                int newCol = linearIndex % c;           // Новый столбец
                reshapedMatrix[newRow][newCol] = mat[i][j];
            }
        }

        return reshapedMatrix;
    }
}

/*
Пример 1
Ввод: mat = [[1,2],[3,4]], r = 1, c = 4
Вывод: [[1,2,3,4]]
Объяснение: 2x2 = 4 элемента → 1x4 = 4 элемента

Пример 2
Ввод: mat = [[1,2],[3,4]], r = 2, c = 4
Вывод: [[1,2],[3,4]]
Объяснение: 2x2 = 4 элемента → 2x4 = 8 элементов (невозможно)
 */
