package org.example.g0501_0600.s0551_student_attendance_record_i;

// #Easy #String

/**
 * 551. Student Attendance Record I
 *
 * Вам нужно определить, должен ли студент быть награжден
 * на основе его записи о посещаемости. Студент может быть
 * награжден только если выполняются следующие условия:
 * Студент не отсутствовал ('A') более одного дня в общей сложности
 * Студент никогда не опаздывал ('L') 3 или более дней подряд
 *
 * Запись посещаемости представлена в виде строки, которая содержит
 * только следующие три символа:
 * 'A' : Отсутствие (Absent)
 * 'L' : Опоздание (Late)
 * 'P' : Присутствие (Present)
 * (примеры внизу)
 *
 * Решение - в один проход - самое быстрое решение - 0 ms
 *
 * Подход:
 * Проходим по строке один раз, отслеживая:
 * Общее количество отсутствий ('A')
 * Текущую серию опозданий подряд ('L')
 * Если встречаем более одного отсутствия или три опоздания подряд - сразу возвращаем false.
 *
 * Преимущества:
 * Время выполнения: O(n), где n - длина строки
 * Память: O(1) - используем только константное количество переменных
 * Однопроходный алгоритм - максимально эффективен
 */
class Solution {
    public boolean checkRecord(String s) {
        int absences = 0;      // Счетчик отсутствий
        int consecutiveLates = 0; // Счетчик опозданий подряд

        for (char attendance : s.toCharArray()) {
            if (attendance == 'A') {
                absences++;
                consecutiveLates = 0; // Сбрасываем счетчик опозданий

                // Если более одного отсутствия - нарушение
                if (absences > 1) {
                    return false;
                }
            } else if (attendance == 'L') {
                consecutiveLates++;

                // Если три опоздания подряд - нарушение
                if (consecutiveLates > 2) {
                    return false;
                }
            } else { // attendance == 'P'
                consecutiveLates = 0; // Сбрасываем счетчик опозданий
            }
        }

        return true; // Все условия выполнены
    }
}

/*
Пример 1
Ввод: "PPALLP"
Вывод: true
Объяснение: Студент отсутствовал 0 раз, никогда не опаздывал 3 раза подряд

Пример 2
Ввод: "PPALLL"
Вывод: false
Объяснение: Студент опаздывал 3 дня подряд (последние три 'L')

Пример 3
Ввод: "PAPALL"
Вывод: false
Объяснение: Студент отсутствовал 2 раза и опаздывал 2 раза подряд
 */