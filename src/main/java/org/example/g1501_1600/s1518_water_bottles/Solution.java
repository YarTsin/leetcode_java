package org.example.g1501_1600.s1518_water_bottles;

// #Easy #Math #Simulation #Интересно

/**
 * 1518. Water Bottles
 *
 * Даны два целых числа:
 * numBottles: количество полных бутылок с водой
 * numExchange: количество пустых бутылок, необходимых для обмена
 * на одну новую полную бутылку
 * Вы пьете воду из полных бутылок, в результате они становятся пустыми.
 * Вы можете обменять определенное количество пустых бутылок на одну
 * новую полную бутылку.
 * Цель: вычислить максимальное количество бутылок с водой, которое
 * вы можете выпить.
 *
 * Процесс:
 * Вы начинаете с numBottles полных бутылок.
 * Вы пьете из всех полных бутылок, превращая их в пустые.
 * Вы можете обменять numExchange пустых бутылок на одну новую полную бутылку.
 * Вы продолжаете процесс, пока у вас недостаточно пустых бутылок для обмена.
 *
 * Решение: итеративный подход - самое быстрое - 0ms
 *
 * Это решение имеет временную сложность O(log numBottles)
 * и пространственную сложность O(1).
 */
class Solution {
    public int numWaterBottles(int numBottles, int numExchange) {
        // Общее количество выпитых бутылок
        int totalDrunk = numBottles;
        // Текущее количество пустых бутылок
        int emptyBottles = numBottles;

        // Пока можно обменивать пустые бутылки на новые полные
        while (emptyBottles >= numExchange) {
            // Количество новых полных бутылок, полученных обменом
            int newFullBottles = emptyBottles / numExchange;
            // Добавляем новые бутылки к общему количеству выпитых
            totalDrunk += newFullBottles;
            // Обновляем количество пустых бутылок:
            // остаток от предыдущего обмена + пустые от новых выпитых бутылок
            emptyBottles = emptyBottles % numExchange + newFullBottles;
        }

        return totalDrunk;
    }
}
/*
Пример
Ввод: numBottles = 9, numExchange = 3
Вывод: 13
Объяснение:
Пьем 9 бутылок → 9 пустых, выпито: 9
Меняем 9/3 = 3 пустых на 3 полных → 0 пустых, 3 полных
Пьем 3 бутылки → 3 пустых, выпито: 9 + 3 = 12
Меняем 3/3 = 1 пустую на 1 полную → 0 пустых, 1 полная
Пьем 1 бутылку → 1 пустая, выпито: 12 + 1 = 13
Нельзя обменять 1 пустую (1 < 3) → процесс завершен
*/