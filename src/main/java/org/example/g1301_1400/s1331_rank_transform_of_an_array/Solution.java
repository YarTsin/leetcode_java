package org.example.g1301_1400.s1331_rank_transform_of_an_array;

// #Easy #Array #Hash_Table #Sorting #Sort

import java.util.Arrays;

/**
 * 1331. Rank Transform of an Array
 *
 * Дан массив целых чисел arr. Нужно заменить каждый элемент его рангом.
 * Ранг представляет собой число, которое показывает позицию элемента
 * при сортировке массива по возрастанию.
 * Ранги начинаются с 1. Если несколько элементов имеют одинаковое значение,
 * они получают одинаковый ранг. Ранги должны быть как можно меньше
 * при сохранении порядка.
 *
 * Цель: Вернуть массив рангов.
 * (примеры внизу)
 *
 * Решение: Сортировка с сохранением индексов + присвоение рангов
 * Решение не быстрое - 38 ms
 *
 *
 */
class Solution {
    public int[] arrayRankTransform(int[] arr) {
        int n = arr.length;
        if (n == 0) return new int[0];

        // Создаем массив пар [значение, исходный индекс]
        int[][] indexedArr = new int[n][2];
        for (int i = 0; i < n; i++) {
            indexedArr[i][0] = arr[i]; // значение
            indexedArr[i][1] = i;      // исходный индекс
        }

        // Сортируем по значению
        Arrays.sort(indexedArr, (a, b) -> Integer.compare(a[0], b[0]));

        int[] result = new int[n];
        int currentRank = 1;

        // Обрабатываем первый элемент
        result[indexedArr[0][1]] = currentRank;

        // Обрабатываем остальные элементы
        for (int i = 1; i < n; i++) {
            // Если текущее значение отличается от предыдущего, увеличиваем ранг
            if (indexedArr[i][0] != indexedArr[i - 1][0]) {
                currentRank++;
            }
            result[indexedArr[i][1]] = currentRank;
        }

        return result;
    }
}
/*
Пример 1
Вход: arr = [40,10,20,30]
Выход: [4,1,2,3]
Объяснение:
Отсортированный массив: [10,20,30,40]
Ранги: 10→1, 20→2, 30→3, 40→4

Пример 2
Вход: arr = [100,100,100]
Выход: [1,1,1]
Объяснение: Все элементы одинаковы, поэтому все получают ранг 1

Пример 3
Вход: arr = [37,12,28,9,100,56,80,5,12]
Выход: [5,3,4,2,8,6,7,1,3]
Объяснение:
Отсортированный массив: [5,9,12,12,28,37,56,80,100]
Ранги: 5→1, 9→2, 12→3, 12→3, 28→4, 37→5, 56→6, 80→7, 100→8

 */