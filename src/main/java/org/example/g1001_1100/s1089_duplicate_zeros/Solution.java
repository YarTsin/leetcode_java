package org.example.g1001_1100.s1089_duplicate_zeros;

// #Easy #Array #Two_Pointers

/**
 * 1089. Duplicate Zeros
 *
 * Дан массив целых чисел arr. Нужно модифицировать массив н
 * а месте: для каждого нуля продублировать его, сдвинув остальные
 * элементы вправо. Элементы, выходящие за пределы исходной длины массива,
 * не записываются (отбрасываются).
 *
 * Важные ограничения:
 * Модификация должна быть выполнена на месте (in-place)
 * Не нужно возвращать новый массив
 * Длина массива остается неизменной
 * (примеры внизу)
 *
 * Решение - в 2 прохода - 2-е по скорости - 1 ms
 * Сложность: Время O(n), пространство O(1)
 */
class Solution {
    public void duplicateZeros(int[] arr) {
        int n = arr.length;
        int zeroCount = 0;

        // Первый проход: подсчитываем нули, которые останутся в массиве
        for (int i = 0; i < n; i++) {
            if (arr[i] == 0) {
                zeroCount++;
            }
        }

        // Второй проход: идем с конца и перемещаем элементы
        int i = n - 1;      // Указатель на исходный элемент
        int j = n + zeroCount - 1; // Указатель на позицию в "виртуальном" расширенном массиве

        while (i >= 0 && j >= 0) {
            if (arr[i] != 0) {
                // Если элемент не ноль, просто копируем его
                if (j < n) {
                    arr[j] = arr[i];
                }
            } else {
                // Если элемент ноль, дублируем его
                if (j < n) {
                    arr[j] = 0;
                }
                j--; // Перемещаем указатель на предыдущую позицию
                if (j < n) {
                    arr[j] = 0;
                }
            }

            i--;
            j--;
        }
    }
}
/*
Пример 1
Ввод: arr = [1,0,2,3,0,4,5,0]
Вывод: [1,0,0,2,3,0,0,4]
Объяснение:
После дублирования нулей:
1 → остается
0 → дублируется → [1,0,0,...]
2,3 → сдвигаются
0 → дублируется → [1,0,0,2,3,0,0,...]
4,5 → сдвигаются, но 5 выходит за границы

Пример 2
Ввод: arr = [1,2,3]
Вывод: [1,2,3]
Объяснение: Нет нулей для дублирования

Пример 3
Ввод: arr = [0,0,0,0,0,0,0]
Вывод: [0,0,0,0,0,0,0]
Объяснение: Все элементы - нули, после дублирования результат тот же

 */