package org.example.g0601_0700.s0628_maximum_product_of_three_numbers;

/**
 * #Easy #Array #Math #Sort
 *
 * Дан массив целых чисел. Необходимо найти три числа,
 * произведение которых будет максимальным среди всех возможных троек
 * чисел в массиве, и вернуть это произведение.
 *
 * Пример 1  * Вход: [1,2,3]  * Выход: 6
 * Объяснение: Единственная возможная тройка дает произведение 6.
 *
 * Пример 2  * Вход: [1,2,3,4]  * Выход: 24
 * Объяснение: Произведение тройки [2,3,4] равно 24.
 *
 * Пример 3  * Вход: [-1,-2,-3]  * Выход: -6
 * Объяснение: Произведение тройки [-1,-2,-3] равно -6.
 * Тут просто деваться некуда
 *
 * Вход: [-100,-98,-1,2,3,4]  * Выход: 39200
 * Объяснение: Произведение тройки [-100,-98,4] равно 39200.
 *
 * todo странное условие
 *
 * Это решение прошло - 2 ms
 */
class Solution {
    public int maximumProduct(int[] nums) {
        // Инициализируем переменные для хранения трех максимальных
        // и двух минимальных значений
        int max1 = Integer.MIN_VALUE;
        int max2 = Integer.MIN_VALUE;
        int max3 = Integer.MIN_VALUE;
        int min1 = Integer.MAX_VALUE;
        int min2 = Integer.MAX_VALUE;

        for (int num : nums) {
            // Обновляем три максимальных значения
            if (num > max1) {
                max3 = max2;
                max2 = max1;
                max1 = num;
            } else if (num > max2) {
                max3 = max2;
                max2 = num;
            } else if (num > max3) {
                max3 = num;
            }

            // Обновляем два минимальных значения
            if (num < min1) {
                min2 = min1;
                min1 = num;
            } else if (num < min2) {
                min2 = num;
            }
        }

        // Рассчитываем оба варианта максимального произведения
        int option1 = max1 * max2 * max3;
        int option2 = min1 * min2 * max1;

        return Math.max(option1, option2);
    }
}

/*
Объяснение:
Проходим по массиву один раз, отслеживая три самых больших и два самых маленьких числа.
Затем вычисляем оба возможных варианта максимального произведения.
Возвращаем максимальное из них.
Временная сложность: O(n) - один проход по массиву.
Пространственная сложность: O(1) - константное количество переменных.
 */