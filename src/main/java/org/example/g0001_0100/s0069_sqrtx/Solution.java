package org.example.g0001_0100.s0069_sqrtx;

/**
 * LeetCode #Easy #Math
 * Необходимо вычислить целочисленный квадратный корень из
 * неотрицательного числа
 *
 * Примеры
 * 4 → 2
 * 8 → 2 (так как 2.828... округляется вниз до 2)
 * 0 → 0
 *
 * Эффективное решение - бинарный поиск
 */
class Solution {
    /**
     * Вычисляет целочисленный квадратный корень из x
     * @param x неотрицательное целое число
     * @return квадратный корень, округленный вниз
     */
    public int mySqrt(int x) {
        // Обработка крайних случаев
        if (x < 2) {
            return x;
        }

        // Устанавливаем границы бинарного поиска
        int left = 1;
        int right = x / 2; // Квадратный корень не может быть больше x/2 при x > 1

        while (left <= right) {
            int mid = left + (right - left) / 2; // Предотвращаем переполнение
            long square = (long) mid * mid; // Используем long для больших чисел

            if (square == x) {
                return mid; // Нашли точный квадратный корень
            } else if (square < x) {
                left = mid + 1; // Ищем в правой половине
            } else {
                right = mid - 1; // Ищем в левой половине
            }
        }

        // Возвращаем right, так как left превысил right
        return right;
    }
}